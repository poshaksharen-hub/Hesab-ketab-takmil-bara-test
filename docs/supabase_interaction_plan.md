# نقشه راه و پروتکل تعامل با Supabase

این سند، روش استاندارد و مورد تایید برای انجام هرگونه تغییر، تست یا عیب‌یابی مربوط به پایگاه داده Supabase را مشخص می‌کند. پیروی از این پروتکل برای جلوگیری از خطا و اطمینان از صحت عملکرد الزامی است.

## پروتکل اصلی

1.  **تشخیص نیاز:** دستیار هوش مصنوعی (AI) نیاز به یک تغییر یا بررسی در پایگاه داده را تشخیص می‌دهد. این نیاز می‌تواند شامل موارد زیر باشد:
    *   ایجاد یا تغییر جداول (Schema Migration).
    *   ایجاد یا تغییر توابع (RPC Functions).
    *   عیب‌یابی سیاست‌های امنیتی (Row Level Security - RLS).
    *   اجرای یک کوئری تستی برای بررسی وضعیت داده‌ها.

2.  **ارائه اسکریپت در چت:** دستیار AI، دستورات SQL مورد نیاز را به صورت یک قطعه کد متنی و قابل کپی، مستقیماً در پنجره چت ارائه می‌دهد. دستیار **نباید** هیچ تغییری را مستقیماً در فایل‌های پروژه اعمال کند، مگر اینکه هدف، به‌روزرسانی دائمی فایل‌های `migration` باشد.

3.  **اجرا توسط کاربر:** شما (کاربر) متن اسکریپت SQL را از پنجره چت کپی کرده و از طریق ابزارها یا دستیار Supabase خود، آن را بر روی پایگاه داده اجرا می‌کنید.

4.  **ارائه نتیجه به AI:** شما خروجی یا نتیجه اجرای اسکریپت (اعم از موفقیت، خطا یا داده بازگشتی) را کپی کرده و در پنجره چت برای دستیار AI ارسال می‌کنید.

5.  **تحلیل و اقدام بعدی:** دستیار AI نتیجه را تحلیل کرده و بر اساس آن، مرحله بعدی را پیشنهاد می‌دهد.

این چرخه تا زمان حل کامل مشکل یا اعمال تغییرات مورد نظر ادامه می‌یابد. این روش تضمین می‌کند که کنترل کامل پایگاه داده همیشه در دستان شما باقی بماند و تمام عملیات به صورت شفاف و قابل ردیابی انجام شود.
